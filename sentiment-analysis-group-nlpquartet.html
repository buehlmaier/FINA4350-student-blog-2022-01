<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="FINA4350 Students" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content=", Progress Report, " />

<meta property="og:title" content="Sentiment Analysis (Group NLPQuartet) "/>
<meta property="og:url" content="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/sentiment-analysis-group-nlpquartet.html" />
<meta property="og:description" content="By Group &#34;NLPQuartet,&#34; written by Chiu Chun Ho Horace This blog covers our sentiment analysis process. The main goal of sentiment analysis is to automatically determine whether a text leaves a positive, negative, or neutral impression. At first, we wanted to train a sentiment analysis model by ourselves. However, we …" />
<meta property="og:site_name" content="FINA4350 Student Blog" />
<meta property="og:article:author" content="FINA4350 Students" />
<meta property="og:article:published_time" content="2022-05-02T11:42:00+08:00" />
<meta name="twitter:title" content="Sentiment Analysis (Group NLPQuartet) ">
<meta name="twitter:description" content="By Group &#34;NLPQuartet,&#34; written by Chiu Chun Ho Horace This blog covers our sentiment analysis process. The main goal of sentiment analysis is to automatically determine whether a text leaves a positive, negative, or neutral impression. At first, we wanted to train a sentiment analysis model by ourselves. However, we …">

        <title>Sentiment Analysis (Group NLPQuartet)  · FINA4350 Student Blog
</title>
        <link href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="FINA4350 Student Blog - Full Atom Feed" />



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/"><span class=site-name>FINA4350 Student Blog</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://buehlmaier.github.io/FINA4350-student-blog-2022-01
                                    >Home</a>
                                </li>
                                <li ><a href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/categories.html">Categories</a></li>
                                <li ><a href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/tags.html">Tags</a></li>
                                <li ><a href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/sentiment-analysis-group-nlpquartet.html">
                Sentiment Analysis (Group NLPQuartet)
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p>By Group "NLPQuartet," written by Chiu Chun Ho Horace</p>
<p>This blog covers our sentiment analysis process. The main goal of sentiment analysis is to automatically determine whether a text leaves a positive, negative, or neutral impression. At first, we wanted to train a sentiment analysis model by ourselves. However, we had only limited numbers of data, especially for news, so, it was not very feasible to train a model. Therefore, we finally decided to use the following pretrained models: TextBlob, NLTK Vader, Afinn, Flair and FinBERT. 
 <em>Link to code can be found here:</em> <a href="https://github.com/crystal-kwan/FINA4350-NLPQuartet/blob/main/Code.ipynb">NLPQuartet_code</a></p>
<h2>Limitations</h2>
<p>The models are easy to apply in general, and the results are straightforward to interpret after we have standardized all the scores to the range between -1 to 1. The only problem was FinBERT as it requires strong computational power to run (10gb ram above). Since none of us had a computer that was strong enough to run this model on our dataset, we decided not to use FinBERT and focused on the other four models instead. </p>
<h2>Our Approach</h2>
<p>A popular formula to calculate the sentiment score (StSc) is:</p>
<p>StSc = (number of positive words - number of negative words)/ total number of words</p>
<p>Instead of using number of positive/ negative words, we substituted the term with the sum of positive phrases' compound scores and the sum of negative phrases'. </p>
<div class="highlight"><pre><span></span><code><span class="n">poslen</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">neglen</span> <span class="o">=</span> <span class="mi">0</span> 
<span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">neg</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">sia</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">pos</span> <span class="o">+=</span> <span class="n">sia</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
        <span class="n">poslen</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">sia</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">neg</span> <span class="o">+=</span> <span class="n">sia</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
        <span class="n">neglen</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">if</span> <span class="n">poslen</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">neglen</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>            
<span class="k">elif</span> <span class="n">neglen</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">score</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="n">poslen</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">poslen</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">score</span> <span class="o">=</span> <span class="p">(</span><span class="n">neg</span><span class="o">/</span><span class="n">neglen</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">score</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos</span><span class="o">+</span><span class="n">neg</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">pos</span><span class="o">+</span><span class="nb">abs</span><span class="p">(</span><span class="n">neg</span><span class="p">))</span>
</code></pre></div>

<h2>Caveats and Application of Models</h2>
<p>For TextBlob, NLTK Vader and Afinn, we applied the model on the lemmatized word list of both News and Tweets. As for Flair, as it is a sentence-based model, we applied it on the sentences instead of tokens for News and Tweets. One concern for using these pretrained models is that they have different libraries, some of them may be more suitable for financial context than the others, so that the score returned on the same News/Tweet could be quite different for different models. As a result, some models had a better explanatory power on stock price than the others. Noting this, we did not take an average sentiment score across the four models but rather ran regression separately. To make our models more content-aware, we also customized the sentiment lexicon to assign new sentiment score to special terms and homonyms that would otherwise be tagged as neutral. </p>
<div class="highlight"><pre><span></span><code><span class="c1">#Before customizing</span>
<span class="kn">from</span> <span class="nn">vaderSentiment.vaderSentiment</span> <span class="kn">import</span> <span class="n">SentimentIntensityAnalyzer</span>
<span class="n">sia</span> <span class="o">=</span> <span class="n">SentimentIntensityAnalyzer</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sia</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="s1">&#39;📉&#39;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;neu&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;compound&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">#After customizing</span>
<span class="n">new_words</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;fire&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;decreasing&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;increasing&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;decrease&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;increase&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;rocket&#39;</span><span class="p">:</span><span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;up&#39;</span><span class="p">:</span><span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;down&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;bull&#39;</span><span class="p">:</span><span class="mf">4.0</span><span class="p">,</span>
<span class="s1">&#39;bear&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">4.0</span>
<span class="p">}</span>

<span class="n">sia</span><span class="o">.</span><span class="n">lexicon</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_words</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sia</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="s1">&#39;📉&#39;</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span> <span class="s1">&#39;neu&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;compound&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.6124</span><span class="p">}</span>
</code></pre></div>

<h2>Observations and Comments</h2>
<p>We observed that financial news sentiment is largely very neutral. This can be explained by the fact that the articles' contents are too long, and the issue of objectivity may also suggest why sentiment scores are not substantial. We believe that this can be improved by only extracting sentences of non-neutral sentiment as neutral sentences dilute the final sentiment score. We could also derive the sentiment from article titles only as they might be more concise and to the point. </p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2022-05-02T11:42:00+08:00">Mon 02 May 2022</time>
            <h4>Category</h4>
            <a class="category-link" href="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/categories.html#progress-report-ref">Progress Report</a>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/buehlmaier/FINA4350-student-blog-2022-01" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="https://buehlmaier.github.io/FINA4350-student-blog-2022-01/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>